{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}
    Hasil
{% endblock %}

{% block content %}

    {% if player.training_round == True %}
        <div class="alert alert-info">
            <strong>Informasi:</strong> Ronde ini adalah ronde latihan. Hasil dari ronde ini <b>tidak</b> akan mempengaruhi pembayaran
            anda. Silakan mempelajari instrumen ini secara seksama.
        </div>
    {% else %}
        <div class="alert alert-warning">
            <strong>Informasi:</strong> Ronde ini adalah <b>permainan riil</b>. Hasil dari ronde ini akan mempengaruhi pembayaran anda!
        </div>
    {% endif %}

    <p>

        {% if player.treatmentgroup == '0' %}
            {% if group.amt_embezzled_g > 0 %}
                {% if group.bribe_acc == False%}
                Salah satu dari anggota kelompok anda mencoba melakukan penggelapan dan penyuapan, namun ia <b>gagal</b>.
                {% else %}
                Salah satu dari anggota kelompok anda <b>berhasil</b> melakukan penggelapan dan sukses menyuap pihak ketiga.
                {% endif %}
            {% else %}
                Tidak ada anggota kelompok anda yang melakukan penggelapan.
            {% endif %}

        {% elif player.treatmentgroup == '1' %}
            {% if group.amt_embezzled_g > 0 %}
                {% if group.bribe_acc == True and group.punish == False %}
                    Salah satu dari anggota kelompok anda <b>sukses</b> melakukan penggelapan dengan sukses menyuap pihak ketiga.
                {% elif group.bribe_acc == True and group.punish == True %}
                    Salah satu dari anggota kelompok anda mencoba melakukan penggelapan dan menyuap pihak ketiga namun
                    <b>gagal</b> dan telah dihukum dengan denda.
                {% elif group.bribe_acc == False%}
                    Salah satu dari anggota kelompok anda mencoba melakukan penggelapan dan meyuap pihak ketiga, namun <b>ditolak</b>.
                {% endif %}
            {% else %}
                Tidak ada anggota kelompok anda yang melakukan penggelapan.
            {% endif %}

        {% elif player.treatmentgroup == '2' %}
            {% if group.amt_embezzled_g > 0 %}
                {% if group.bribe_acc == True and group.punish == False %}
                    Salah satu dari anggota kelompok anda <b>sukses</b> melakukan penggelapan dengan sukses menyuap pihak ketiga.
                {% elif group.bribe_acc == True and group.punish == True %}
                    Salah satu dari anggota kelompok anda mencoba melakukan penggelapan dan menyuap pihak ketiga namun
                    <b>gagal</b> dan telah dihukum dengan biaya sosial penggelapan.
                {% elif group.bribe_acc == False%}
                    Salah satu dari anggota kelompok anda mencoba melakukan penggelapan dan meyuap pihak ketiga, namun <b>ditolak</b>.
                {% endif %}
            {% else %}
                Tidak ada anggota kelompok anda yang melakukan penggelapan.
            {% endif %}

        {% endif %}
    </p>

    <table class="table-condensed" style="width:500px; margin-top:20px;">
        <tr><td>Kontribusi Anda:</td><td>{{ player.contribution }}</td></tr>
        <tr><td>Kontribusi pemain lainnya:</td><td></td></tr>
        {% for p in player.get_others_in_group %}
            <tr><td></td><td>{{ p.contribution }}</td></tr>
        {% endfor %}

        <tr><td>Kontribusi total:</td><td>{{ group.total_contribution }}</td></tr>

        <tr><td colspan="2"><hr/></td></tr>

        <tr><td>Sisa untuk proyek bersama sebanyak:</td><td>{{ group.contribution_left }}</td></tr>
        <tr><td>Kontribusi total yang diambil:</td><td>{{ group.amt_embezzled_g }}</td></tr>

        <tr><td>Nilai proyek bersama:</td><td>{{ group.social_welfare_embz }}</td></tr>

        {% if player.briber == True %}
        <tr><td>Jumlah yang Anda dapat <b>setelah dikurangi suap</b>:</td><td>{{ player.bribe_self }}</td></tr>
        {% else %}{% endif %}
        <tr><td colspan="2"><hr/></td></tr>

        <tr><td>Sehingga, pendapatan anda di ronde ini menjadi:</td><td>{{ player.payoff_thisround }}</td></tr>

    </table>
    <p></p>
    <br>Tekan tombol di bawah untuk melanjutkan ke ronde berikutnya.
    <br>

    <button class="otree-btn-next btn btn-primary next-button otree-next-button">Mainkan Ronde Berikutnya</button>

    <br>
    <button class="btn" onclick="myFunction()">Tampilkan Instruksi Permainan</button>

        <div id="myDIV">
        {% include Constants.instructions_template %}
        </div>

    <script>
        function myFunction() {
            var x = document.getElementById("myDIV");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }
    </script>


{% endblock %}
